{
  "info": {
    "_postman_id": "20d2c89e-06c1-4591-b4f0-2018e9685e9b",
    "name": "MCM",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "KC - Create Admin fonctionnel",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Login to KC test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    const response = pm.response.json();\r",
                  "    pm.environment.set(\"accessToken\", response.access_token);\r",
                  "    pm.environment.set(\"refreshToken\", response.refresh_token);\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "grant_type",
                  "value": "password",
                  "type": "text"
                },
                {
                  "key": "username",
                  "value": "{{adminUsername}}",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "{{adminPassword}}",
                  "type": "text"
                },
                {
                  "key": "client_id",
                  "value": "admin-cli",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/realms/master/protocol/openid-connect/token",
              "host": ["{{idp_base_url}}"],
              "path": [
                "auth",
                "realms",
                "master",
                "protocol",
                "openid-connect",
                "token"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create admin fonctionnel",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Create Admin fonctionnel test: OK\", function () {\r",
                  "    pm.response.to.have.status(201);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    const locationHeader = pm.response.headers.find(header => header.key === 'Location');\r",
                  "    const idAdminFonctionnel = locationHeader.value.split('/').slice(-1);\r",
                  "    pm.environment.set(\"idAdminFonctionnel\", idAdminFonctionnel);\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"username\": \"admin_fonctionnel\",\r\n    \"enabled\": true,\r\n    \"totp\": false,\r\n    \"emailVerified\": true,\r\n    \"email\": \"\",\r\n    \"disableableCredentialTypes\": [],\r\n    \"requiredActions\": [],\r\n    \"notBefore\": 0,\r\n    \"credentials\": [\r\n        {\r\n            \"type\": \"password\",\r\n            \"value\":\"{{adminFonctionnelPassword}}\",\r\n            \"temporary\": false\r\n        }\r\n    ]\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/admin/realms/mcm/users",
              "host": ["{{idp_base_url}}"],
              "path": ["auth", "admin", "realms", "mcm", "users"]
            }
          },
          "response": []
        },
        {
          "name": "Get KC groups",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Get KC groups test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    const response = pm.response.json();\r",
                  "    const adminGroup = response.find(group => group.name === 'admins');\r",
                  "    pm.environment.set(\"idAdminGroup\", adminGroup.id);\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{idp_base_url}}/auth/admin/realms/mcm/groups",
              "host": ["{{idp_base_url}}"],
              "path": ["auth", "admin", "realms", "mcm", "groups"]
            }
          },
          "response": []
        },
        {
          "name": "Add to admin group",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Add admin fonctionnel to admin group: OK\", function () {\r",
                  "    pm.response.to.have.status(204);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{idp_base_url}}/auth/admin/realms/mcm/users/{{idAdminFonctionnel}}/groups/{{idAdminGroup}}",
              "host": ["{{idp_base_url}}"],
              "path": [
                "auth",
                "admin",
                "realms",
                "mcm",
                "users",
                "{{idAdminFonctionnel}}",
                "groups",
                "{{idAdminGroup}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Logout to KC test : OK\", function () {\r",
                  "    pm.response.to.have.status(204);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    pm.environment.unset(\"accessToken\");\r",
                  "    pm.environment.unset(\"refreshToken\");\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "refresh_token",
                  "value": "{{refreshToken}}",
                  "type": "text"
                },
                {
                  "key": "client_id",
                  "value": "admin-cli",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/realms/master/protocol/openid-connect/logout",
              "host": ["{{idp_base_url}}"],
              "path": [
                "auth",
                "realms",
                "master",
                "protocol",
                "openid-connect",
                "logout"
              ]
            }
          },
          "response": []
        }
      ],
      "auth": {
        "type": "noauth"
      },
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
        }
      ]
    },
    {
      "name": "React Admin",
      "item": [
        {
          "name": "Login",
          "item": [
            {
              "name": "Login",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Login to KC test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"accessToken\", response.access_token);\r",
                      "    pm.environment.set(\"refreshToken\", response.refresh_token);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "urlencoded",
                  "urlencoded": [
                    {
                      "key": "grant_type",
                      "value": "password",
                      "type": "text"
                    },
                    {
                      "key": "username",
                      "value": "admin_fonctionnel",
                      "type": "text"
                    },
                    {
                      "key": "password",
                      "value": "{{adminFonctionnelPassword}}",
                      "type": "text"
                    },
                    {
                      "key": "client_id",
                      "value": "platform",
                      "type": "text"
                    }
                  ]
                },
                "url": {
                  "raw": "{{idp_base_url}}/auth/realms/mcm/protocol/openid-connect/token",
                  "host": ["{{idp_base_url}}"],
                  "path": [
                    "auth",
                    "realms",
                    "mcm",
                    "protocol",
                    "openid-connect",
                    "token"
                  ]
                }
              },
              "response": []
            }
          ],
          "auth": {
            "type": "noauth"
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            }
          ]
        },
        {
          "name": "Aides Nationales",
          "item": [
            {
              "name": "Création Aide Nationale 1",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 1 test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide Nationale 1\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "type": "text",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Prime à la casse de votre véhicule pollueur\",\r\n\"incentiveType\": \"AideNationale\",\r\n\"funderName\": \"Etat français\",\r\n\"territoryName\": \"Territoires concernés: France métropolitaine et DOMTOM\",\r\n\"minAmount\": \"A partir de 550€ sous conditions\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez le numéro vert au 05 206 308\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"voiture\", \"libreService\"],\r\n\"attachments\": [\"rib\", \"justificatifDomicile\", \"Certificat immatriculation\"],\r\n\"validityDuration\": \"12 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            },
            {
              "name": "Get aide id",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"GET aide test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{accessToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives/{{ID Aide Nationale 1}}",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives", "{{ID Aide Nationale 1}}"]
                }
              },
              "response": []
            },
            {
              "name": "Création Aide Nationale 2",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 2 test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide Nationale 2\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "type": "text",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Aide à la réparation de vélos immatriculés\",\r\n\"incentiveType\": \"AideNationale\",\r\n\"funderName\": \"Etat français\",\r\n\"territoryName\": \"Territoires concernés: France métropolitaine et DOMTOM\",\r\n\"minAmount\": \"A partir de 10€ sous conditions\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez le numéro vert au 05 206 308\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"velo\"],\r\n\"attachments\": [\"rib\", \"justificatifDomicile\", \"Certificat immatriculation Vélo\"],\r\n\"validityDuration\": \"6 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            },
            {
              "name": "Get aide id",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"GET aide test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{accessToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives/{{ID Aide Nationale 2}}",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives", "{{ID Aide Nationale 2}}"]
                }
              },
              "response": []
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{accessToken}}",
                "type": "string"
              }
            ]
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            }
          ]
        },
        {
          "name": "Collectivite Mulhouse",
          "item": [
            {
              "name": "Create collectivité",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"idCollectivite\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"name\": \"Mulhouse\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/collectivities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "collectivities"]
                }
              },
              "response": []
            },
            {
              "name": "Create communauté A",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite communauté test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"communityIdMulhouseA\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"name\": \"Mulhouse-Communauté A\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/funders/communities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "funders", "communities"]
                }
              },
              "response": []
            },
            {
              "name": "Get communaute id",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"GET communaute test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{api_base_url}}/v1/funders/{{idCollectivite}}/communities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "funders", "{{idCollectivite}}", "communities"]
                }
              },
              "response": []
            },
            {
              "name": "Create communauté B",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite communauté test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"communityIdMulhouseB\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"name\": \"Mulhouse-Communauté B\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/funders/communities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "funders", "communities"]
                }
              },
              "response": []
            },
            {
              "name": "Get communaute id",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"GET communaute test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{api_base_url}}/v1/funders/{{idCollectivite}}/communities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "funders", "{{idCollectivite}}", "communities"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur superviseur-gestionnaire (A+B)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite super gestionnaire test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"lastName\": \"Ochon-SG-AB\",\r\n    \"firstName\": \"Paul\",\r\n    \"email\": \"superviseur-gestionnaire-ab.mulhouse@yopmail.com\",\r\n    \"roles\":[\"superviseurs\",\"gestionnaires\"],\r\n    \"communityIds\": [\"{{communityIdMulhouseA}}\", \"{{communityIdMulhouseB}}\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur superviseur-gestionnaire (B)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite super gestionnaire test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"lastName\": \"Ruetsch-SG-B\",\r\n    \"firstName\": \"Alexis\",\r\n    \"email\": \"superviseur-gestionnaire-b.mulhouse@yopmail.com\",\r\n    \"roles\":[\"superviseurs\",\"gestionnaires\"],\r\n    \"communityIds\": [\"{{communityIdMulhouseB}}\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur superviseur",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite superviseur test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"lastName\": \"Tache-S\",\r\n    \"firstName\": \"Mouss\",\r\n    \"email\": \"superviseur.mulhouse@yopmail.com\",\r\n    \"roles\":[\"superviseurs\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur gestionnaire (B)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite gestionnaire test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"lastName\": \"Térieur-G-B\",\r\n    \"firstName\": \"Alex\",\r\n    \"email\": \"gestionnaire-b.mulhouse@yopmail.com\",\r\n    \"roles\":[\"gestionnaires\"],\r\n    \"communityIds\": [\"{{communityIdMulhouseB}}\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Création Aide 1",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 1 collectivité Mulhouse test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide 1 Collectivité Mulhouse\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "type": "text",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Un réseau de transport en commun régional plus performant\",\r\n\"incentiveType\": \"AideTerritoire\",\r\n\"funderName\": \"Mulhouse\",\r\n\"territoryName\": \"Aide disponible pour Mulhouse et son agglomération\",\r\n\"minAmount\": \"A partir de 5€ par mois sous conditions\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez le numéro vert au 05 603 603\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"transportsCommun\"],\r\n\"attachments\": [\"justificatifDomicile\"],\r\n\"validityDuration\": \"24 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            },
            {
              "name": "Création Aide 2",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 2 collectivité Mulhouse test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide 2 Collectivité Mulhouse\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "type": "text",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Le vélo électrique arrive à Mulhouse !\",\r\n\"incentiveType\": \"AideTerritoire\",\r\n\"funderName\": \"Mulhouse\",\r\n\"territoryName\": \"Mulhouse\",\r\n\"minAmount\": \"A partir de 55€ sous conditions\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez le numéro vert au 08 90 83\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"velo\"],\r\n\"attachments\": [\"rib\", \"justificatifDomicile\"],\r\n\"validityDuration\": \"12 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            },
            {
              "name": "Création Aide 3",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 3 collectivité Mulhouse test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide 3 Collectivité Mulhouse\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Covoiturez à Mulhouse\",\r\n\"incentiveType\": \"AideTerritoire\",\r\n\"funderName\": \"Mulhouse\",\r\n\"territoryName\": \"Aide disponible pour Mulhouse et son agglomération\",\r\n\"minAmount\": \"Inscription gratuite\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez-nous directement depuis le site WWW.Covoiturage.com\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"covoiturage\"],\r\n\"attachments\": [\"justificatifDomicile\"],\r\n\"validityDuration\": \"24 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{accessToken}}",
                "type": "string"
              }
            ]
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            }
          ]
        },
        {
          "name": "Collectivite simulation-maas",
          "item": [
            {
              "name": "Create collectivité simulation-maas",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"idCollectivite\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{accessToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"name\": \"simulation-maas\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/collectivities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "collectivities"]
                }
              },
              "response": []
            },
            {
              "name": "Create communauté A",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite communauté test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"communityIdMAASA\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"name\": \"SM-Communauté A\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/funders/communities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "funders", "communities"]
                }
              },
              "response": []
            },
            {
              "name": "Create communauté B",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite communauté test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"communityIdMAASB\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"name\": \"SM-Communauté B\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/funders/communities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "funders", "communities"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur superviseur-gestionnaire (A+B)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite super gestionnaire test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken}}",
											"type": "string"
										}
									]
								},
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"lastName\": \"Mansoif-SG-AB\",\r\n    \"firstName\": \"Gérard\",\r\n    \"email\": \"{{emailSuperviseurGestionnaireSM}}\",\r\n    \"roles\":[\"superviseurs\",\"gestionnaires\"],\r\n    \"communityIds\": [\"{{communityIdMAASA}}\", \"{{communityIdMAASB}}\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur superviseur-gestionnaire (B)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite super gestionnaire test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"lastName\": \"Fort-SG-B\",\r\n    \"firstName\": \"Franck\",\r\n    \"email\": \"superviseur-gestionnaire-b.sm@yopmail.com\",\r\n    \"roles\":[\"superviseurs\",\"gestionnaires\"],\r\n    \"communityIds\": [\"{{communityIdMAASB}}\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur superviseur",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite superviseur test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"lastName\": \"Tome-S\",\r\n    \"firstName\": \"Emma\",\r\n    \"email\": \"superviseur.sm@yopmail.com\",\r\n    \"roles\":[\"superviseurs\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur gestionnaire (B)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create collectivite gestionnaire test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idCollectivite}}\",\r\n    \"lastName\": \"Golo-G-B\",\r\n    \"firstName\": \"Terry\",\r\n    \"email\": \"gestionnaire-b.sm@yopmail.com\",\r\n    \"roles\":[\"gestionnaires\"],\r\n    \"communityIds\": [\"{{communityIdMAASB}}\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Création Aide 1",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 1 collectivité simulation-maas test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide 1 Collectivité simulation-maas\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [""],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "type": "text",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Un réseau de transport en commun régional plus performant\",\r\n\"incentiveType\": \"AideTerritoire\",\r\n\"funderName\": \"simulation-maas\",\r\n\"territoryName\": \"Aide disponible pour Simulation maas et son agglomération\",\r\n\"minAmount\": \"A partir de 5€ par mois sous conditions\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez le numéro vert au 05 603 603\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"transportsCommun\"],\r\n\"attachments\": [\"justificatifDomicile\"],\r\n\"validityDuration\": \"24 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            },
            {
              "name": "Création Aide 2",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 2 collectivité simulation-maas test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide 2 Collectivité simulation-maas\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "type": "text",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Le vélo électrique arrive à Simulation maas !\",\r\n\"incentiveType\": \"AideTerritoire\",\r\n\"funderName\": \"simulation-maas\",\r\n\"territoryName\": \"simulation maas\",\r\n\"minAmount\": \"A partir de 55€ sous conditions\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez le numéro vert au 08 90 83\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"velo\"],\r\n\"attachments\": [\"rib\", \"justificatifDomicile\"],\r\n\"validityDuration\": \"12 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            },
            {
              "name": "Création Aide 3",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 3 collectivité simulation-maas test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide 3 Collectivité simulation-maas\", response.id);\r",
                      "\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Covoiturez à Simulation maas\",\r\n\"incentiveType\": \"AideTerritoire\",\r\n\"funderName\": \"simulation-maas\",\r\n\"territoryName\": \"Aide disponible pour Simulation maas et son agglomération\",\r\n\"minAmount\": \"Inscription gratuite\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez-nous directement depuis le site WWW.Covoiturage.com\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"covoiturage\"],\r\n\"attachments\": [\"justificatifDomicile\"],\r\n\"validityDuration\": \"24 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{accessToken}}",
                "type": "string"
              }
            ]
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            }
          ]
        },
        {
          "name": "Entreprise Capgemini",
          "item": [
            {
              "name": "Create entreprise Capgemini",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create entreprise test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"idEntreprise\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "bearer",
                  "bearer": [
                    {
                      "key": "token",
                      "value": "{{accessToken}}",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"name\": \"Capgemini\",\r\n    \"emailFormat\": [\"@yopmail.com\", \"@capgemini.fr\", \"@capgemini.com\", \"@sogeti.com\"],\r\n  \"isHris\": false\r\n }",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/enterprises",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "enterprises"]
                }
              },
              "response": []
            },
            {
              "name": "Create communauté 1",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create entreprise communauté test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"communityIdCapgemini1\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"funderId\": \"{{idEntreprise}}\",\r\n    \"name\": \"C-Communauté 1\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/funders/communities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "funders", "communities"]
                }
              },
              "response": []
            },
            {
              "name": "Create communauté 2",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create entreprise communauté test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"communityIdCapgemini2\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"funderId\": \"{{idEntreprise}}\",\r\n    \"name\": \"C-Communauté 2\"\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/funders/communities",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "funders", "communities"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur superviseur-gestionnaire (1+2)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create entreprise super gestionnaire test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idEntreprise}}\",\r\n    \"lastName\": \"Zona-SG-12\",\r\n    \"firstName\": \"Harry\",\r\n    \"email\": \"superviseur-gestionnaire-12.capgemini@yopmail.com\",\r\n    \"roles\":[\"superviseurs\",\"gestionnaires\"],\r\n    \"communityIds\": [\"{{communityIdCapgemini1}}\",\"{{communityIdCapgemini2}}\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur superviseur-gestionnaire (2)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create entreprise super gestionnaire test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idEntreprise}}\",\r\n    \"lastName\": \"Fornie-SG-2\",\r\n    \"firstName\": \"Callie\",\r\n    \"email\": \"superviseur-gestionnaire-2.capgemini@yopmail.com\",\r\n    \"roles\":[\"superviseurs\",\"gestionnaires\"],\r\n    \"communityIds\": [\"{{communityIdCapgemini2}}\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur superviseur",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create entreprise superviseur test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idEntreprise}}\",\r\n    \"lastName\": \"Nateur-S\",\r\n    \"firstName\": \"Jordy\",\r\n    \"email\": \"superviseur.capgemini@yopmail.com\",\r\n    \"roles\":[\"superviseurs\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Create utilisateur gestionnaire (2)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create entreprise gestionnaire test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "raw",
									"raw": "{\r\n    \"funderId\": \"{{idEntreprise}}\",\r\n    \"lastName\": \"Bonno-G-2\",\r\n    \"firstName\": \"Jean\",\r\n    \"email\": \"gestionnaire-2.capgemini@yopmail.com\",\r\n    \"roles\":[\"gestionnaires\"],\r\n    \"communityIds\": [\"{{communityIdCapgemini2}}\"]\r\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/users",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "users"]
                }
              },
              "response": []
            },
            {
              "name": "Création Aide 1",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 1 Capgemini test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide 1 Capgemini\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "type": "text",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Aide à l'achat d'une trotinette électrique\",\r\n\"incentiveType\": \"AideEmployeur\",\r\n\"funderName\": \"Capgemini\",\r\n\"territoryName\": \"Mulhouse\",\r\n\"minAmount\": \"A partir de 10€\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez le numéro vert au 05 603 603\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"electrique\"],\r\n\"attachments\": [\"justificatifDomicile\"],\r\n\"validityDuration\": \"24 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            },
            {
              "name": "Création Aide 2",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Create aide 2 entreprise 1 test: OK\", function () {\r",
                      "    pm.response.to.have.status(200);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    const response = pm.response.json();\r",
                      "    pm.environment.set(\"ID Aide 2 Entreprise 1\", response.id);\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "type": "text",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n\"title\": \"Covoiturez à Mulhouse\",\r\n\"incentiveType\": \"AideEmployeur\",\r\n\"funderName\": \"Capgemini\",\r\n\"territoryName\": \"Aide disponible pour Mulhouse et son agglomération\",\r\n\"minAmount\": \"Inscription gratuite\",\r\n\"additionalInfos\": \"Info complémentaire: Ut bibendum tincidunt turpis gravida iaculis. Sed tempor condimentum nulla vel convallis. Vivamus finibus tincidunt leo, ullamcorper semper libero malesuada id.\",\r\n\"allocatedAmount\": \"Montant: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"paymentMethod\": \"Modalité de versement: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"conditions\": \"Conditions d'obtention: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis egestas lacus dui, vulputate tempus purus bibendum nec. \\n- Fusce bibendum ipsum at risus venenatis, et luctus metus facilisis. \\n- Maecenas consectetur neque sit amet enim porta fringilla. \\n- Cras fringilla odio nisl, a finibus diam volutpat in. \\n- Nullam vestibulum odio purus, blandit maximus lectus malesuada a. \\n- Nunc rutrum velit quis tincidunt pretium. \\n- Suspendisse elementum quis ante eu sollicitudin. \\nDonec eu risus urna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Aenean eu dignissim sem. Integer placerat suscipit ex vel ullamcorper. Praesent tempus dictum odio in congue. Praesent tincidunt lectus id ligula consequat dictum. Morbi varius sollicitudin malesuada.\\n\\nInteger sodales in nisi id gravida. Maecenas dui sapien, interdum ut mi dapibus, fermentum faucibus orci. Duis interdum, ex nec congue maximus, est nulla viverra odio, non interdum augue nisl nec sapien. Morbi ante augue, convallis nec massa at, efficitur euismod mi. Integer a magna elementum, rhoncus purus sed, ultricies turpis. Aenean in dolor lobortis, posuere magna sed, consectetur urna. Duis sit amet mattis magna. Nunc non tempus lacus. Donec a lacus vel mauris condimentum feugiat. In non diam porttitor, semper elit in, placerat metus. Pellentesque neque velit, tincidunt eget finibus in, faucibus id tortor. Duis ut gravida nisl, eu dignissim magna. Donec in magna sed arcu tempor fermentum id et sapien. Nam ut semper justo, id dictum augue. Aenean suscipit sem non tempor vehicula.\\n\\nSed venenatis erat quis neque vehicula laoreet. Curabitur ac vehicula massa. In eget risus at purus eleifend finibus. Quisque ultricies orci id lorem sodales eleifend. Nulla eu condimentum tortor, nec mattis orci. Nam et orci tincidunt, ultricies sem at, congue risus. Vestibulum tincidunt, massa ac sollicitudin volutpat, odio dui laoreet diam, non facilisis nulla velit nec nisl. Vivamus quis tristique massa. Ut tincidunt metus vehicula velit lacinia viverra. Donec consequat dapibus tortor, nec dapibus nunc rhoncus at. Sed volutpat leo sed augue ultricies, in ultricies lorem porttitor.\",\r\n\"contact\": \"Contactez-nous directement depuis le site WWW.Covoiturage.com\",\r\n\"description\": \"Description dolor sit amet, consectetur adipiscing elit. Praesent congue dolor diam, vel aliquet tortor malesuada in. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\\nCette aide est valable jusqu'au 31/03/2021\",\r\n\"transportList\": [\"covoiturage\"],\r\n\"attachments\": [\"justificatifDomicile\"],\r\n\"validityDuration\": \"24 mois\",\r\n\"validityDate\": \"2024-07-31\",\r\n\"isMCMStaff\": true\r\n}"
                },
                "url": {
                  "raw": "{{api_base_url}}/v1/incentives",
                  "host": ["{{api_base_url}}"],
                  "path": ["v1", "incentives"]
                }
              },
              "response": []
            }
          ],
          "auth": {
            "type": "bearer",
            "bearer": [
              {
                "key": "token",
                "value": "{{accessToken}}",
                "type": "string"
              }
            ]
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            }
          ]
        },
        {
          "name": "Entreprise SIRH",
					"item": [
						{
							"name": "Create entreprise SIRH",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Create entreprise test: OK\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"    pm.response.to.not.have.jsonBody(\"error\");\r",
											"    const response = pm.response.json();\r",
											"    pm.environment.set(\"idEntrepriseSIRH\", response.id);\r",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{accessToken}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"SIRH\",\r\n    \"emailFormat\": [\"@yopmail.com\"],\r\n  \"isHris\": true\r\n }",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{api_base_url}}/v1/enterprises",
									"host": [
										"{{api_base_url}}"
									],
									"path": [
										"v1",
										"enterprises"
									]
								}
							},
							"response": []
						}
					]
				},
				{
          "name": "Logout",
          "item": [
            {
              "name": "Logout",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Logout to KC test: OK\", function () {\r",
                      "    pm.response.to.have.status(204);\r",
                      "    pm.response.to.not.have.jsonBody(\"error\");\r",
                      "    pm.environment.unset(\"accessToken\");\r",
                      "    pm.environment.unset(\"refreshToken\");\r",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "urlencoded",
                  "urlencoded": [
                    {
                      "key": "refresh_token",
                      "value": "{{refreshToken}}",
                      "type": "text"
                    },
                    {
                      "key": "client_id",
                      "value": "platform",
                      "type": "text"
                    }
                  ]
                },
                "url": {
                  "raw": "{{idp_base_url}}/auth/realms/mcm/protocol/openid-connect/logout",
                  "host": ["{{idp_base_url}}"],
                  "path": [
                    "auth",
                    "realms",
                    "mcm",
                    "protocol",
                    "openid-connect",
                    "logout"
                  ]
                }
              },
              "response": []
            }
          ],
          "auth": {
            "type": "noauth"
          },
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            },
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [""]
              }
            }
          ]
        }
      ],
      "auth": {
        "type": "noauth"
      },
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
        }
      ]
    },
    {
      "name": "Website - Create citoyen",
      "item": [
        {
          "name": "Create utilisateur étudiant",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Create citizen test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "});\r",
                  "\r",
                  "\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"lastName\": \"Rasovsky\",\r\n    \"firstName\": \"Bob\",\r\n    \"birthdate\": \"1970-01-01\",\r\n    \"email\": \"{{emailEtudiantCitoyen}}\",\r\n    \"password\": \"{{citoyenPassword}}\",\r\n    \"city\": \"Paris\",\r\n    \"postcode\": \"75000\",\r\n    \"tos1\": true,\r\n    \"tos2\": true,\r\n    \"status\": \"etudiant\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{api_base_url}}/v1/citizens",
              "host": ["{{api_base_url}}"],
              "path": ["v1", "citizens"]
            }
          },
          "response": []
        },
        {
          "name": "Create utilisateur indépendant",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Create citizen test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "});\r",
                  "\r",
                  "\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"lastName\": \"Aconda\",\r\n    \"firstName\": \"Anne\",\r\n    \"birthdate\": \"1970-01-01\",\r\n    \"email\": \"{{emailIndependantCitoyen}}\",\r\n    \"password\": \"{{citoyenPassword}}\",\r\n    \"city\": \"Ouashing-tone\",\r\n    \"postcode\": \"99000\",\r\n    \"tos1\": true,\r\n    \"tos2\": true,\r\n    \"status\": \"independantLiberal\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{api_base_url}}/v1/citizens",
              "host": ["{{api_base_url}}"],
              "path": ["v1", "citizens"]
            }
          },
          "response": []
        },
        {
          "name": "Create utilisateur retraite",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Create citizen test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "});\r",
                  "\r",
                  "\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"lastName\": \"Lognaise\",\r\n    \"firstName\": \"Thibault\",\r\n    \"birthdate\": \"1970-01-01\",\r\n    \"email\": \"{{emailRetraiteCitoyen}}\",\r\n    \"password\": \"{{citoyenPassword}}\",\r\n    \"city\": \"Paris\",\r\n    \"postcode\": \"75000\",\r\n    \"tos1\": true,\r\n    \"tos2\": true,\r\n    \"status\": \"retraite\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{api_base_url}}/v1/citizens",
              "host": ["{{api_base_url}}"],
              "path": ["v1", "citizens"]
            }
          },
          "response": []
        },
        {
          "name": "Create utilisateur sans emploi",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Create citizen test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "});\r",
                  "\r",
                  "\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"lastName\": \"Javel\",\r\n    \"firstName\": \"Aude\",\r\n    \"birthdate\": \"1970-01-01\",\r\n    \"email\": \"{{emailSansEmploiCitoyen}}\",\r\n    \"password\": \"{{citoyenPassword}}\",\r\n    \"city\": \"L'eau Sangèles\",\r\n    \"postcode\": \"99000\",\r\n    \"tos1\": true,\r\n    \"tos2\": true,\r\n    \"status\": \"sansEmploi\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{api_base_url}}/v1/citizens",
              "host": ["{{api_base_url}}"],
              "path": ["v1", "citizens"]
            }
          },
          "response": []
        },
        {
          "name": "Create utilisateur salarié Capgemini",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Create citizen test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "});\r",
                  "\r",
                  "\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"lastName\": \"Térieur\",\r\n    \"firstName\": \"Alain\",\r\n    \"birthdate\": \"1970-01-01\",\r\n    \"email\": \"{{emailSalarieCitoyen}}\",\r\n    \"password\": \"{{citoyenPassword}}\",\r\n    \"city\": \"L'eau Sangèles\",\r\n    \"postcode\": \"99000\",\r\n    \"tos1\": true,\r\n    \"tos2\": true,\r\n    \"status\": \"salarie\",\r\n    \"affiliation\": {\r\n        \"enterpriseEmail\": \"salarie.mcm.pro@yopmail.com\",\r\n        \"enterpriseId\": \"{{idEntreprise}}\"\r\n    }\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{api_base_url}}/v1/citizens",
              "host": ["{{api_base_url}}"],
              "path": ["v1", "citizens"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "KC - Validate accounts",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Login to KC test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    const response = pm.response.json();\r",
                  "    pm.environment.set(\"accessToken\", response.access_token);\r",
                  "    pm.environment.set(\"refreshToken\", response.refresh_token);\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "grant_type",
                  "value": "password",
                  "type": "text"
                },
                {
                  "key": "username",
                  "value": "{{adminUsername}}",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "{{adminPassword}}",
                  "type": "text"
                },
                {
                  "key": "client_id",
                  "value": "admin-cli",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/realms/master/protocol/openid-connect/token",
              "host": ["{{idp_base_url}}"],
              "path": [
                "auth",
                "realms",
                "master",
                "protocol",
                "openid-connect",
                "token"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get all users",
          "event": [
            {
              "listen": "test",
              "script": {
								"exec": [
									"pm.test(\"Get all accounts : OK\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"    pm.response.to.not.have.jsonBody(\"error\");\r",
									"    const response = pm.response.json();\r",
									"    const idUserList = [];\r",
									"    const idUserListToAddPassword = [];\r",
									"    for (const user of response) {\r",
									"        if(!user.emailVerified) {\r",
									"            idUserList.push(user.id);\r",
									"        }\r",
									"        if(user.requiredActions.includes('UPDATE_PASSWORD')) {\r",
									"            idUserListToAddPassword.push(user.id)\r",
									"        }\r",
									"    }\r",
									"    pm.environment.set(\"idUserList\", idUserList);\r",
									"    pm.environment.set(\"idUserListToAddPassword\", idUserListToAddPassword);\r",
									"});"
								],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{idp_base_url}}/auth/admin/realms/mcm/users",
              "host": ["{{idp_base_url}}"],
              "path": ["auth", "admin", "realms", "mcm", "users"]						}
            },
            "response": []
          },
          {
            "name": "Set Password for funders",
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "exec": [
                    "const idUserListToAddPassword = pm.environment.get(\"idUserListToAddPassword\");\r",
                    "if (idUserListToAddPassword && idUserListToAddPassword.length > 0){\r",
                    "    pm.environment.set(\"idUserToAddPassword\", idUserListToAddPassword[0]);\r",
                    "} else {\r",
                    "    postman.setNextRequest();\r",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              },
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "pm.test(\"Validate user : OK\", function () {\r",
                    "    const idUserListToAddPassword = pm.environment.get(\"idUserListToAddPassword\");\r",
                    "    const idUserToAddPassword = idUserListToAddPassword.shift();\r",
                    "    pm.environment.set(\"idUserToAddPassword\", idUserToAddPassword);\r",
                    "    pm.response.to.have.status(204);\r",
                    "    pm.response.to.not.have.jsonBody(\"error\");\r",
                    "    if (idUserListToAddPassword && idUserListToAddPassword.length > 0){\r",
                    "        postman.setNextRequest(pm.info.requestName);\r",
                    "        pm.environment.set(\"idUserListToAddPassword\", idUserListToAddPassword);\r",
                    "    } else {\r",
                    "        pm.environment.unset(\"idUserToAddPassword\");\r",
                    "        pm.environment.unset(\"idUserListToAddPassword\");\r",
                    "    }\r",
                    "});"
                  ],
                  "type": "text/javascript"
                }
              }
            ],
            "request": {
              "auth": {
                "type": "bearer",
                "bearer": [
                  {
                    "key": "token",
                    "value": "{{accessToken}}",
                    "type": "string"
                  }
                ]
              },
              "method": "PUT",
              "header": [
                {
                  "key": "Content-Type",
                  "name": "Content-Type",
                  "type": "text",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\r\n    \"type\": \"password\",\r\n    \"value\": \"{{utilisateurFinanceurPassword}}\",\r\n    \"temporary\": false\r\n}"
              },
              "url": {
                "raw": "{{idp_base_url}}/auth/admin/realms/mcm/users/{{idUserToAddPassword}}/reset-password",
                "host": [
                  "{{idp_base_url}}"
                ],
                "path": [
                  "auth",
                  "admin",
                  "realms",
                  "mcm",
                  "users",
                  "{{idUserToAddPassword}}",
                  "reset-password"
                ]
              },
              "description": "Set up a new password for the user.\n"
            },
          "response": []
        },
        {
          "name": "Validate user email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Validate user : OK\", function () {\r",
                  "    const idUserList = pm.environment.get(\"idUserList\");\r",
                  "    const idUser = idUserList.shift();\r",
                  "    pm.environment.set(\"idUser\", idUser);\r",
                  "    pm.response.to.have.status(204);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    if (idUserList && idUserList.length > 0){\r",
                  "        postman.setNextRequest(pm.info.requestName);\r",
                  "        pm.environment.set(\"idUserList\", idUserList);\r",
                  "    } else {\r",
                  "        pm.environment.set(\"idUserList\", []);\r",
                  "    }\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const idUserList = pm.environment.get(\"idUserList\");\r",
                  "if (idUserList && idUserList.length > 0){\r",
                  "    pm.environment.set(\"idUser\", idUserList[0]);\r",
                  "} else {\r",
                  "    postman.setNextRequest();\r",
                  "}\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"emailVerified\": true,\r\n    \"requiredActions\": []\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/admin/realms/mcm/users/{{idUser}}",
              "host": ["{{idp_base_url}}"],
              "path": ["auth", "admin", "realms", "mcm", "users", "{{idUser}}"]
            }
          },
          "response": []
        },
        {
          "name": "Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Logout to KC test : OK\", function () {\r",
                  "    pm.response.to.have.status(204);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    pm.environment.unset(\"accessToken\");\r",
                  "    pm.environment.unset(\"refreshToken\");\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "refresh_token",
                  "value": "{{refreshToken}}",
                  "type": "text"
                },
                {
                  "key": "client_id",
                  "value": "admin-cli",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/realms/master/protocol/openid-connect/logout",
              "host": ["{{idp_base_url}}"],
              "path": [
                "auth",
                "realms",
                "master",
                "protocol",
                "openid-connect",
                "logout"
              ]
            }
          },
          "response": []
        }
      ],
      "auth": {
        "type": "noauth"
      },
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
        }
      ]
    },
    {
      "name": "MAAS",
      "item": [
        {
          "name": "Login MAAS",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Login to KC test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    const response = pm.response.json();\r",
                  "    pm.environment.set(\"accessToken\", response.access_token);\r",
                  "    pm.environment.set(\"refreshToken\", response.refresh_token);\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "grant_type",
                  "value": "client_credentials",
                  "type": "text"
                },
                {
                  "key": "client_secret",
                  "value": "{{maasClientSecret}}",
                  "type": "text"
                },
                {
                  "key": "client_id",
                  "value": "simulation-maas-backend",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/realms/mcm/protocol/openid-connect/token",
              "host": ["{{idp_base_url}}"],
              "path": [
                "auth",
                "realms",
                "mcm",
                "protocol",
                "openid-connect",
                "token"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Maas aides",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"GET Maas aides test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{api_base_url}}/v1/incentives",
              "host": ["{{api_base_url}}"],
              "path": ["v1", "incentives"]
            }
          },
          "response": []
        },
        {
          "name": "Logout MAAS",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Logout to KC test: OK\", function () {\r",
                  "    pm.response.to.have.status(204);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    pm.environment.unset(\"accessToken\");\r",
                  "    pm.environment.unset(\"refreshToken\");\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "refresh_token",
                  "value": "{{refreshToken}}",
                  "type": "text"
                },
                {
                  "key": "client_id",
                  "value": "simulation-maas-backend",
                  "type": "text"
                },
                {
                  "key": "client_secret",
                  "value": "{{maasClientSecret}}",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/realms/mcm/protocol/openid-connect/logout",
              "host": ["{{idp_base_url}}"],
              "path": [
                "auth",
                "realms",
                "mcm",
                "protocol",
                "openid-connect",
                "logout"
              ]
            }
          },
          "response": []
        }
      ],
      "auth": {
        "type": "noauth"
      },
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
        }
      ]
    },
    {
      "name": "Website - Utilisateur",
      "item": [
        {
          "name": "Login Citizen Website",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Login to KC test: OK\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    const response = pm.response.json();\r",
                  "    pm.environment.set(\"accessToken\", response.access_token);\r",
                  "    pm.environment.set(\"refreshToken\", response.refresh_token);\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "let emailCitoyenList = pm.environment.get(\"emailCitoyenList\");\r",
                  "\r",
                  "// Init emailCitoyenList\r",
                  "if (!emailCitoyenList || emailCitoyenList.length == 0) {\r",
                  "    emailCitoyenList = [\r",
                  "        pm.environment.get(\"emailEtudiantCitoyen\"),\r",
                  "        pm.environment.get(\"emailIndependantCitoyen\"),\r",
                  "        pm.environment.get(\"emailRetraiteCitoyen\"),\r",
                  "        pm.environment.get(\"emailSansEmploiCitoyen\"),\r",
                  "        pm.environment.get(\"emailSalarieCitoyen\")\r",
                  "    ];\r",
                  "}\r",
                  "\r",
                  "const emailCitoyen = emailCitoyenList.shift();\r",
                  "console.log(\"emailCitoyen\", emailCitoyen)\r",
                  "pm.environment.set(\"emailCitoyen\", emailCitoyen);\r",
                  "pm.environment.set(\"emailCitoyenList\", emailCitoyenList);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "grant_type",
                  "value": "password",
                  "type": "text"
                },
                {
                  "key": "username",
                  "value": "{{emailCitoyen}}",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "{{citoyenPassword}}",
                  "type": "text"
                },
                {
                  "key": "client_id",
                  "value": "platform",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/realms/mcm/protocol/openid-connect/token",
              "host": ["{{idp_base_url}}"],
              "path": [
                "auth",
                "realms",
                "mcm",
                "protocol",
                "openid-connect",
                "token"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create multiple demandes brouillon",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Create demande MAAS test: OK\", function () {\r",
                  "\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "\r",
                  "    const response = pm.response.json();\r",
                  "    const incentiveIdListMAAS = pm.environment.get(\"incentiveIdListMAAS\");\r",
                  "    let idDemandeMAASListJustifs = pm.environment.get(\"idDemandeMAASListJustifs\");\r",
                  "    let idDemandeMAASListFinalize = pm.environment.get(\"idDemandeMAASListFinalize\");\r",
                  "\r",
                  "    idDemandeMAASListJustifs.push(response.id);\r",
                  "    idDemandeMAASListFinalize.push(response.id);\r",
                  "\r",
                  "    pm.environment.set(\"idDemandeMAASListJustifs\", idDemandeMAASListJustifs);\r",
                  "    pm.environment.set(\"idDemandeMAASListFinalize\", idDemandeMAASListFinalize);\r",
                  "\r",
                  "\r",
                  "    if (incentiveIdListMAAS && incentiveIdListMAAS.length > 0) {\r",
                  "        postman.setNextRequest(pm.info.requestName);\r",
                  "    } else {\r",
                  "        pm.environment.unset(\"incentiveIdMAAS\");\r",
                  "        pm.environment.unset(\"incentiveIdListMAAS\");\r",
                  "        postman.setNextRequest();\r",
                  "    }\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "let incentiveIdListMAAS = pm.environment.get(\"incentiveIdListMAAS\");\r",
                  "\r",
                  "// Init incentiveIdListMAAS\r",
                  "if (!incentiveIdListMAAS || incentiveIdListMAAS.length == 0) {\r",
                  "    incentiveIdListMAAS = [\r",
                  "        pm.environment.get(\"ID Aide 1 Collectivité simulation-maas\"),\r",
                  "        pm.environment.get(\"ID Aide 2 Collectivité simulation-maas\"),\r",
                  "        pm.environment.get(\"ID Aide 3 Collectivité simulation-maas\")\r",
                  "    ];\r",
                  "    pm.environment.set(\"idDemandeMAASListJustifs\", []);\r",
                  "    pm.environment.set(\"idDemandeMAASListFinalize\", []);\r",
                  "}\r",
                  "\r",
                  "const incentiveIdMAAS = incentiveIdListMAAS.shift();\r",
                  "pm.environment.set(\"incentiveIdListMAAS\", incentiveIdListMAAS);\r",
                  "pm.environment.set(\"incentiveIdMAAS\", incentiveIdMAAS);\r",
                  "\r",
                  "// Init communaute according to condition\r",
                  "// Communaute MAAS A if etudiant, sans emploi or (retraite and first aide) \r",
                  "if ((pm.environment.get(\"emailCitoyen\") === pm.environment.get(\"emailEtudiantCitoyen\")) ||\r",
                  "    (pm.environment.get(\"emailCitoyen\") === pm.environment.get(\"emailSansEmploiCitoyen\")) ||\r",
                  "    (pm.environment.get(\"emailCitoyen\") === pm.environment.get(\"emailRetraiteCitoyen\")) && (pm.environment.get(\"incentiveIdMAAS\") === pm.environment.get(\"ID Aide 1 Collectivité simulation-maas\"))) {\r",
                  "    pm.environment.set(\"communityIdMAAS\", pm.environment.get(\"communityIdMAASA\"));\r",
                  "} else {\r",
                  "    pm.environment.set(\"communityIdMAAS\", pm.environment.get(\"communityIdMAASB\"));\r",
                  "}\r",
                  "\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"incentiveId\": \"{{incentiveIdMAAS}}\",\r\n    \"consent\": true,\r\n    \"communityId\": \"{{communityIdMAAS}}\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{api_base_url}}/v1/maas/subscriptions",
              "host": ["{{api_base_url}}"],
              "path": ["v1", "maas", "subscriptions"]
            }
          },
          "response": []
        },
        {
          "name": "Upload justificatifs multiple subscriptions",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Create subscription MAAS justificatif test: OK\", function () {\r",
                  "    const idDemandeMAASListJustifs = pm.environment.get(\"idDemandeMAASListJustifs\");\r",
                  "\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "\r",
                  "    if (idDemandeMAASListJustifs && idDemandeMAASListJustifs.length > 0){\r",
                  "        postman.setNextRequest(pm.info.requestName);\r",
                  "    } else {\r",
                  "        pm.environment.unset(\"idDemandeMAAS\");\r",
                  "        pm.environment.unset(\"idDemandeMAASListJustifs\");\r",
                  "    }\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const idDemandeMAASListJustifs = pm.environment.get(\"idDemandeMAASListJustifs\");\r",
                  "\r",
                  "if (idDemandeMAASListJustifs && idDemandeMAASListJustifs.length > 0) {\r",
                  "    const idDemandeMAAS = idDemandeMAASListJustifs.shift();\r",
                  "    pm.environment.set(\"idDemandeMAAS\", idDemandeMAAS);\r",
                  "    pm.environment.set(\"idDemandeMAASListJustifs\", idDemandeMAASListJustifs);\r",
                  "} else {\r",
                  "    postman.setNextRequest();\r",
                  "}\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "CI",
                  "type": "file",
                  "src": "api-tests/mob.PNG"
                },
                {
                  "key": "Passport",
                  "type": "file",
                  "src": "api-tests/mob.PNG"
                }
              ]
            },
            "url": {
              "raw": "{{api_base_url}}/v1/maas/subscriptions/{{idDemandeMAAS}}/attachments",
              "host": ["{{api_base_url}}"],
              "path": [
                "v1",
                "maas",
                "subscriptions",
                "{{idDemandeMAAS}}",
                "attachments"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Finalize multiple subscriptions",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Finaliser une demande MAAS test: OK\", function () {\r",
                  "    const idDemandeMAASListFinalize = pm.environment.get(\"idDemandeMAASListFinalize\");\r",
                  "\r",
                  "    pm.response.to.have.status(200);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "\r",
                  "    if (idDemandeMAASListFinalize && idDemandeMAASListFinalize.length > 0){\r",
                  "        postman.setNextRequest(pm.info.requestName);\r",
                  "    } else {\r",
                  "        pm.environment.unset(\"idDemandeMAASListFinalize\");\r",
                  "    }\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const idDemandeMAASListFinalize = pm.environment.get(\"idDemandeMAASListFinalize\");\r",
                  "\r",
                  "if (idDemandeMAASListFinalize && idDemandeMAASListFinalize.length > 0) {\r",
                  "    const idDemandeMAAS = idDemandeMAASListFinalize.shift();\r",
                  "    pm.environment.set(\"idDemandeMAAS\", idDemandeMAAS);\r",
                  "    pm.environment.set(\"idDemandeMAASListFinalize\", idDemandeMAASListFinalize);\r",
                  "} else {\r",
                  "    postman.setNextRequest();\r",
                  "}\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{accessToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{api_base_url}}/v1/maas/subscriptions/{{idDemandeMAAS}}/verify",
              "host": ["{{api_base_url}}"],
              "path": [
                "v1",
                "maas",
                "subscriptions",
                "{{idDemandeMAAS}}",
                "verify"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logout Citizen Website",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Logout to KC test: OK\", function () {\r",
                  "    pm.response.to.have.status(204);\r",
                  "    pm.response.to.not.have.jsonBody(\"error\");\r",
                  "    pm.environment.unset(\"accessToken\");\r",
                  "    pm.environment.unset(\"refreshToken\");\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const emailCitoyenList = pm.environment.get(\"emailCitoyenList\");\r",
                  "\r",
                  "if (emailCitoyenList && emailCitoyenList.length > 0){\r",
                  "    postman.setNextRequest(\"Login Citizen MAAS\");\r",
                  "} else {\r",
                  "    pm.environment.unset(\"emailCitoyenList\");\r",
                  "    pm.environment.unset(\"emailCitoyen\");\r",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "refresh_token",
                  "value": "{{refreshToken}}",
                  "type": "text"
                },
                {
                  "key": "client_id",
                  "value": "platform",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{idp_base_url}}/auth/realms/mcm/protocol/openid-connect/logout",
              "host": ["{{idp_base_url}}"],
              "path": [
                "auth",
                "realms",
                "mcm",
                "protocol",
                "openid-connect",
                "logout"
              ]
            }
          },
          "response": []
        }
      ],
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
        },
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [""]
          }
				}
			]
		},
		{
			"name": "Website - Validate/Reject",
			"item": [
				{
					"name": "Login Superviseur Gestionnaire simulation-maas",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Login to KC test: OK\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"    pm.response.to.not.have.jsonBody(\"error\");\r",
									"    const response = pm.response.json();\r",
									"    pm.environment.set(\"accessToken\", response.access_token);\r",
									"    pm.environment.set(\"refreshToken\", response.refresh_token);\r",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "grant_type",
									"value": "password",
									"type": "text"
								},
								{
									"key": "username",
									"value": "{{emailSuperviseurGestionnaireSM}}",
									"type": "text"
								},
								{
									"key": "password",
									"value": "{{utilisateurFinanceurPassword}}",
									"type": "text"
								},
								{
									"key": "client_id",
									"value": "platform",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{idp_base_url}}/auth/realms/mcm/protocol/openid-connect/token",
							"host": ["{{idp_base_url}}"],
							"path": [
								"auth",
								"realms",
								"mcm",
								"protocol",
								"openid-connect",
								"token"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get subscriptions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Get subscriptions id : OK\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"    pm.response.to.not.have.jsonBody(\"error\");\r",
									"    const response = pm.response.json();\r",
									"    const idSubscriptionsList = [];\r",
									"    for (const subscription of response) {\r",
									"        idSubscriptionsList.push(subscription.id);\r",
									"    }\r",
									"    pm.environment.set(\"idSubscriptionsList\", idSubscriptionsList);\r",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{api_base_url}}/v1/subscriptions",
							"host": [
								"{{api_base_url}}"
							],
							"path": [
								"v1",
								"subscriptions"
							]
						}
					},
					"response": []
				},
				{
					"name": "Validate subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validate subscription : OK\", function () {\r",
									"    const idSubscriptionsList = pm.environment.get(\"idSubscriptionsList\");\r",
									"    const idSubscription = idSubscriptionsList.shift();\r",
									"    pm.environment.set(\"idSubscription\", idSubscription);\r",
									"    var counter = pm.environment.get(\"subscriptionCounter\");\r",
									"    pm.response.to.have.status(204);\r",
									"    pm.response.to.not.have.jsonBody(\"error\");\r",
									"    if ((idSubscriptionsList && idSubscriptionsList.length > 0) && counter < 2){\r",
									"        counter++;\r",
									"        pm.environment.set(\"idSubscriptionsList\", idSubscriptionsList);\r",
									"        pm.environment.set(\"subscriptionCounter\", counter);\r",
									"        postman.setNextRequest(pm.info.requestName);\r",
									"    } else {\r",
									"        pm.environment.set(\"idSubscriptionsList\", idSubscriptionsList);\r",
									"        pm.environment.set(\"subscriptionCounter\", 0);\r",
									"    }\r",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const idSubscriptionsList = pm.environment.get(\"idSubscriptionsList\");\r",
									"if (idSubscriptionsList && idSubscriptionsList.length > 0){\r",
									"    pm.environment.set(\"idSubscription\", idSubscriptionsList[0]);\r",
									"} else {\r",
									"    postman.setNextRequest();\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"mode\": \"multiple\",\r\n  \"frequency\": \"mensuelle\",\r\n  \"amount\": 50,\r\n  \"lastPayment\": \"2023-01-01\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{api_base_url}}/v1/subscriptions/{{idSubscription}}/validate",
							"host": [
								"{{api_base_url}}"
							],
							"path": [
								"v1",
								"subscriptions",
								"{{idSubscription}}",
								"validate"
							]
						}
					},
					"response": []
				},
				{
					"name": "Reject subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Reject subscription : OK\", function () {\r",
									"    const idSubscriptionsList = pm.environment.get(\"idSubscriptionsList\");\r",
									"    const idSubscription = idSubscriptionsList.shift();\r",
									"    pm.environment.set(\"idSubscription\", idSubscription);\r",
									"    var counter = pm.environment.get(\"subscriptionCounter\");\r",
									"    pm.response.to.have.status(204);\r",
									"    pm.response.to.not.have.jsonBody(\"error\");\r",
									"    if ((idSubscriptionsList && idSubscriptionsList.length > 0) && counter < 2){\r",
									"        counter++;\r",
									"        pm.environment.set(\"idSubscriptionsList\", idSubscriptionsList);\r",
									"        pm.environment.set(\"subscriptionCounter\", counter);\r",
									"        postman.setNextRequest(pm.info.requestName);\r",
									"    } else {\r",
									"        pm.environment.set(\"idSubscriptionsList\", []);\r",
									"        pm.environment.set(\"subscriptionCounter\", 0);\r",
									"    }\r",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const idSubscriptionsList = pm.environment.get(\"idSubscriptionsList\");\r",
									"if (idSubscriptionsList && idSubscriptionsList.length > 0){\r",
									"    pm.environment.set(\"idSubscription\", idSubscriptionsList[0]);\r",
									"} else {\r",
									"    postman.setNextRequest();\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"type\": \"Autre\",\r\n  \"other\": \"Ne remplit pas les conditions  d'éligibilité à cette aide\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{api_base_url}}/v1/subscriptions/{{idSubscription}}/reject",
							"host": [
								"{{api_base_url}}"
							],
							"path": [
								"v1",
								"subscriptions",
								"{{idSubscription}}",
								"reject"
							]
						}
					},
					"response": []
				},
				{
					"name": "Logout Superviseur Gestionnaire",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Logout to KC test: OK\", function () {\r",
									"    pm.response.to.have.status(204);\r",
									"    pm.response.to.not.have.jsonBody(\"error\");\r",
									"    pm.environment.unset(\"accessToken\");\r",
									"    pm.environment.unset(\"refreshToken\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "refresh_token",
									"value": "{{refreshToken}}",
									"type": "text"
								},
								{
									"key": "client_id",
									"value": "platform",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{idp_base_url}}/auth/realms/mcm/protocol/openid-connect/logout",
							"host": [
								"{{idp_base_url}}"
							],
							"path": [
								"auth",
								"realms",
								"mcm",
								"protocol",
								"openid-connect",
								"logout"
							]
						}
					},
					"response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [""]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [""]
      }
    }
  ]
}
